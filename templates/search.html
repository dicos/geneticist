{% extends "base.html" %}

{% block other_static %}
    {{ form.media }}
<style type="text/css">
.list_patient {
    border-collapse: collapse;
    width: 100%;
}
.list_patient td, .list_patient th {
    border: 1px solid #000;
    padding: 10px;
}
@media print {
  a[href]:after {
    content: "";
  }
  abbr[title]:after {
    content: "";
  }
} 
</style>
{% endblock %}

{% block content %}
<form action=".">
<ul>
{{ form.as_ul }}
</ul>
<input type="submit" value="Найти">
</form>
<a href="{% url 'patient_add' %}">+ Добавить</a>
<table class="list_patient">
    <tr>
        <th width="20%">ФИО</th>
        <th>Дата рождения</th>
        <th>Диагноз по МКБ</th>
        <th width="40%">ЛПУ прикрепления</th>
        <th>Пол</th>
    </tr>
    {% for patient in patients %}
    <tr>
        <td><a href="{% url 'patient_edit' patient.pk %}">{{ patient.all_full_names|linebreaksbr }}</a></td>
        <td><a href="{% url 'patient_edit' patient.pk %}">{{ patient.birthday|date }}</a></td>
        <td><a href="{% url 'patient_edit' patient.pk %}">{{ patient.diagnosis_text_code|linebreaksbr}}</a></td>
        <td><a href="{% url 'patient_edit' patient.pk %}">{{ patient.name_allocate_lpu|default:"&nbsp;" }}</a></td>
        <td><a href="{% url 'patient_edit' patient.pk %}">{{ patient.get_gender_display }}</a></td>
    </tr>
    {% endfor %}
</table>
<p>Количество пациентов: {{ count }}</p>
{% endblock %}
